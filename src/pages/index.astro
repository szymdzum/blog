---
import Hero from "@components/Hero.astro";
import PostCard from "@components/PostCard.astro";
import BaseLayout from "@layouts/BaseLayout.astro";
import type { CollectionEntry } from "astro:content";
import { getCollection } from "astro:content";

const posts = (await getCollection("blog"))
  .sort(
    (a: CollectionEntry<"blog">, b: CollectionEntry<"blog">) =>
      b.data.pubDate.valueOf() - a.data.pubDate.valueOf(),
  )
  .slice(0, 3);
---

<BaseLayout
  title="The Null Hypothesis - Software Engineering & Digital Philosophy"
  description="A space where decades of code meet moments of clarity"
>
  <Hero />

  <section style="margin-top: var(--space-3xl);">
    <h2 style="margin-bottom: var(--space-lg);">Recent Posts</h2>
    <div style="display: flex; flex-direction: column; gap: var(--space-xl);">
      {posts.map((post: CollectionEntry<"blog">) => (
        <PostCard post={post} />
      ))}
    </div>
  </section>
</BaseLayout>
